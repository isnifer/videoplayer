function Video(a){var b;this.elem=a,this.volume=a.volume,this.skin=a.getAttribute("data-skin"),b=this.skin&&this.skins[this.skin]?{order:this.skins[this.skin],name:this.skin}:{order:this.skins.default,name:"default"},this.init(b)}function Player(a){var b=document.querySelectorAll(a),c=b.length,d=[],e=0;for(e;c>e;e+=1)d.push(new Video(b[e]))}Video.prototype.skins={skin_1:["progress","play","mute","volume","time","allTime","fullscreen"],skin_2:["play","time","allTime","progress","mute","volume","fullscreen"],skin_3:["progress","play","mute","volume","time","allTime","fullscreen"],skin_4:["play","progress","time","mute"],skin_5:["play","progress","volume","mute"],skin_6:["play","mute","progress","time","fullscreen"],skin_7:["progress","play","mute","volume","time","allTime","fullscreen"],skin_8:["progress","play","mute","volume","time","allTime","fullscreen"],"default":["progress","play","mute","volume","time","allTime","fullscreen"]},Video.prototype.playerControls={progress:{tag:"progress",attrs:[{name:"class",value:"controls__progress"},{name:"max",value:100},{name:"value",value:0}]},play:{tag:"span",attrs:[{name:"class",value:"controls__item controls__play"}]},mute:{tag:"span",attrs:[{name:"class",value:"controls__item controls__mute"}]},volume:{tag:"input",attrs:[{name:"class",value:"controls__item controls__volume"},{name:"type",value:"range"},{name:"min",value:0},{name:"max",value:1},{name:"step",value:.01},{name:"value",value:1}]},time:{tag:"span",attrs:[{name:"class",value:"controls__item controls__time"}]},allTime:{tag:"span",attrs:[{name:"class",value:"controls__item controls__time controls__time-overall"}]},fullscreen:{tag:"span",attrs:[{name:"class",value:"controls__item controls__fullscreen"}]},elements:{tag:"div",attrs:[{name:"class",value:"controls__elements"}]}},Video.prototype.createControl=function(a){for(var b=document.createElement(a.tag),c=0;c<a.attrs.length;c++)b.setAttribute(a.attrs[c].name,a.attrs[c].value);return b},Video.prototype.getHumanReadableTime=function(a){var b=a?a:this.elem.duration,c=parseInt(b/3600),d=parseInt(c>0?(b-3600*c)/60:b/60),e=parseInt(c>0?b-3600*c-60*d:b-60*d);return c=10>c?"0"+c:c,d=10>d?"0"+d:d,e=10>e?"0"+e:e,c+":"+d+":"+e},Video.prototype.playPause=function(){return this.elem.paused?this.elem.play():this.elem.pause(),this},Video.prototype.mute=function(a){return 0!==this.elem.volume?(this.elem.volume=0,a.value=0):this.elem.volume=a.value=this.volume,this},Video.prototype.changeVolume=function(a){return this.elem.volume=this.volume=a,this},Video.prototype.updateProgressbar=function(a){a.value=Math.floor(100/this.elem.duration*this.elem.currentTime)},Video.prototype.goToPosition=function(a){this.elem.currentTime=parseInt(a/100*this.elem.duration)},Video.prototype.fullScreen=function(){this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen()},Video.prototype.init=function(a){var b=this,c=b.elem.parentNode,d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("p"),g={progress:this.createControl(this.playerControls.progress),play:this.createControl(this.playerControls.play),mute:this.createControl(this.playerControls.mute),volume:this.createControl(this.playerControls.volume),time:this.createControl(this.playerControls.time),allTime:this.createControl(this.playerControls.allTime),fullscreen:this.createControl(this.playerControls.fullscreen),elements:this.createControl(this.playerControls.elements)};f.classList.add("video__title"),f.textContent=this.elem.title,e.classList.add("controls","controls-"+a.name);for(var h=0;h<a.order.length;h++)e.appendChild(g[a.order[h]]);d.classList.add("video"),d.appendChild(f),c.insertBefore(d,this.elem),d.appendChild(this.elem),d.appendChild(e),d.style.width=e.offsetWidth+"px",this.elem.addEventListener("loadedmetadata",function(){g.allTime.textContent=" / "+b.getHumanReadableTime()},!1),g.volume.addEventListener("change",function(){b.changeVolume(this.value)},!1),g.mute.addEventListener("click",function(){b.mute(g.volume),this.classList.toggle("controls__mute_on")},!1),g.play.addEventListener("click",function(){b.playPause(),this.classList.toggle("controls__play_paused")},!1),this.elem.addEventListener("ended",function(){g.play.classList.toggle("controls__play_paused")}),this.elem.addEventListener("timeupdate",function(){g.time.textContent=b.getHumanReadableTime(this.currentTime),b.updateProgressbar(g.progress)},!1),g.progress.addEventListener("click",function(a){var c=Math.floor(100/this.offsetWidth*a.offsetX);b.goToPosition(c),this.value=c},!1),g.fullscreen.addEventListener("click",function(){b.fullScreen()},!1)};