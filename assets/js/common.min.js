!function(){function Video(video){var currentSkin;this.elem=video,this.volume=this.elem.volume,this.skin=video.getAttribute("data-skin"),this.skins={skin_1:["progress","play","mute","volume","time","allTime","fullscreen"],skin_2:["progress","play","mute","volume","time","allTime","fullscreen"],skin_3:["progress","play","mute","volume","time","allTime","fullscreen"],skin_4:["progress","play","mute","volume","time","allTime","fullscreen"],skin_5:["progress","play","mute","volume","time","allTime","fullscreen"],skin_6:["progress","play","mute","volume","time","allTime","fullscreen"],skin_7:["progress","play","mute","volume","time","allTime","fullscreen"],skin_8:["progress","play","mute","volume","time","allTime","fullscreen"],skin_9:["progress","play","mute","volume","time","allTime","fullscreen"],"default":["progress","play","mute","volume","time","allTime","fullscreen"]},currentSkin=this.skin&&this.skins[this.skin]?this.skins[this.skin]:this.skins.default,this.init(currentSkin)}var playerControls={progress:{tag:"progress",attrs:[{name:"class",value:"controls__progress"},{name:"max",value:100},{name:"value",value:0}]},play:{tag:"span",attrs:[{name:"class",value:"controls__item controls__play"}]},mute:{tag:"span",attrs:[{name:"class",value:"controls__item controls__mute"}]},volume:{tag:"input",attrs:[{name:"class",value:"controls__item controls__volume"},{name:"type",value:"range"},{name:"min",value:0},{name:"max",value:1},{name:"step",value:.01},{name:"value",value:1}]},time:{tag:"span",attrs:[{name:"class",value:"controls__item controls__time"}]},allTime:{tag:"span",attrs:[{name:"class",value:"controls__item controls__time controls__time-overall"}]},fullscreen:{tag:"span",attrs:[{name:"class",value:"controls__item controls__fullscreen"}]},elements:{tag:"div",attrs:[{name:"class",value:"controls__elements"}]}};Video.prototype.createControl=function(options){for(var el=document.createElement(options.tag),i=0;i<options.attrs.length;i++)el.setAttribute(options.attrs[i].name,options.attrs[i].value);return el},Video.prototype.getHumanReadableTime=function(time){var dirtyTime=time?time:this.elem.duration,hours=parseInt(dirtyTime/3600),minutes=parseInt(hours>0?(dirtyTime-3600*hours)/60:dirtyTime/60),seconds=parseInt(hours>0?dirtyTime-3600*hours-60*minutes:dirtyTime-60*minutes);return hours=10>hours?"0"+hours:hours,minutes=10>minutes?"0"+minutes:minutes,seconds=10>seconds?"0"+seconds:seconds,hours+":"+minutes+":"+seconds},Video.prototype.playPause=function(){return this.elem.paused?this.elem.play():this.elem.pause(),this},Video.prototype.mute=function(volumeButton){return 0!==this.elem.volume?(this.elem.volume=0,volumeButton.value=0):this.elem.volume=volumeButton.value=this.volume,this},Video.prototype.changeVolume=function(value){return this.elem.volume=this.volume=value,this},Video.prototype.updateProgressbar=function(progress){return progress.value=Math.floor(100/this.elem.duration*this.elem.currentTime),!1},Video.prototype.goToPosition=function(percents){this.elem.currentTime=parseInt(percents/100*this.elem.duration)},Video.prototype.fullScreen=function(){this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen()},Video.prototype.init=function(currentSkin){var self=this,videoParent=self.elem.parentNode,wrapper=document.createElement("div"),controls=document.createElement("div"),title=document.createElement("p"),elements={progress:this.createControl(playerControls.progress),play:this.createControl(playerControls.play),mute:this.createControl(playerControls.mute),volume:this.createControl(playerControls.volume),time:this.createControl(playerControls.time),allTime:this.createControl(playerControls.allTime),fullscreen:this.createControl(playerControls.fullscreen),elements:this.createControl(playerControls.elements)};title.classList.add("video__title"),title.textContent=this.elem.title,controls.classList.add("controls"),controls.classList.add(this.skin?"controls-"+this.skin:"controls-skin_default");for(var i=0;i<currentSkin.length;i++)controls.appendChild(elements[currentSkin[i]]);wrapper.classList.add("video"),wrapper.appendChild(title),videoParent.insertBefore(wrapper,this.elem),wrapper.appendChild(this.elem),wrapper.appendChild(controls),this.elem.addEventListener("loadedmetadata",function(){elements.allTime.textContent=" / "+self.getHumanReadableTime()},!1),elements.volume.addEventListener("change",function(){self.changeVolume(this.value)},!1),elements.mute.addEventListener("click",function(){self.mute(volume),this.classList.toggle("controls__mute_on")},!1),elements.play.addEventListener("click",function(){self.playPause(),this.classList.toggle("controls__play_paused")},!1),this.elem.addEventListener("ended",function(){elements.play.classList.toggle("controls__play_paused")}),this.elem.addEventListener("timeupdate",function(){elements.time.textContent=self.getHumanReadableTime(this.currentTime),self.updateProgressbar(elements.progress)},!1),elements.progress.addEventListener("click",function(e){var coords=Math.floor(100/this.offsetWidth*e.offsetX);self.goToPosition(coords),this.value=coords,self.elem.paused?(self.elem.play(),elements.play.classList.remove("controls__play_paused")):elements.play.classList.add("controls__play_paused")},!1),elements.fullscreen.addEventListener("click",function(){self.fullScreen()},!1)};for(var videos=document.querySelectorAll("video"),videosLen=videos.length,newArr=[],i=0;videosLen>i;i+=1)newArr.push(new Video(videos[i]))}();