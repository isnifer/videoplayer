!function(){function Video(video){this.elem=video,this.volume=this.elem.volume,this.init()}Video.prototype.createControl=function(options){for(var el=document.createElement(options.tag),i=0;i<options.attrs.length;i++)el.setAttribute(options.attrs[i].name,options.attrs[i].value);return el},Video.prototype.getHumanReadableTime=function(time){var dirtyTime=time?time:this.elem.duration,hours=parseInt(dirtyTime/3600),minutes=parseInt(hours>0?(dirtyTime-3600*hours)/60:dirtyTime/60),seconds=parseInt(hours>0?dirtyTime-3600*hours-60*minutes:dirtyTime-60*minutes);return hours=10>hours?"0"+hours:hours,minutes=10>minutes?"0"+minutes:minutes,seconds=10>seconds?"0"+seconds:seconds,hours+":"+minutes+":"+seconds},Video.prototype.playPause=function(){return this.elem.paused?this.elem.play():this.elem.pause(),this},Video.prototype.mute=function(volumeButton){return 0!==this.elem.volume?(this.elem.volume=0,volumeButton.value=0):this.elem.volume=volumeButton.value=this.volume,this},Video.prototype.changeVolume=function(value){return this.elem.volume=this.volume=value,this},Video.prototype.updateProgressbar=function(progress){return progress.value=Math.floor(100/this.elem.duration*this.elem.currentTime),!1},Video.prototype.goToPosition=function(percents){this.elem.currentTime=parseInt(percents/100*this.elem.duration)},Video.prototype.fullScreen=function(){this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen()},Video.prototype.init=function(){var self=this,wrapper=document.createElement("div"),controls=document.createElement("div"),title=document.createElement("p"),progress=this.createControl({tag:"progress",attrs:[{name:"class",value:"controls__progress"},{name:"max",value:100},{name:"value",value:0}]}),play=this.createControl({tag:"span",attrs:[{name:"class",value:"controls__item controls__play"}]}),audio=this.createControl({tag:"div",attrs:[{name:"class",value:"controls__item controls__audio-block"}]}),mute=this.createControl({tag:"span",attrs:[{name:"class",value:"controls__mute"}]}),rangeWrapper=this.createControl({tag:"label",attrs:[{name:"class",value:"controls__range-wrapper"}]}),volume=this.createControl({tag:"input",attrs:[{name:"class",value:"controls__volume"},{name:"type",value:"range"},{name:"min",value:0},{name:"max",value:1},{name:"step",value:.01},{name:"value",value:1}]}),time=this.createControl({tag:"span",attrs:[{name:"class",value:"controls__item controls__time"}]}),fullscreen=this.createControl({tag:"span",attrs:[{name:"class",value:"controls__item controls__fullscreen"}]}),elements=this.createControl({tag:"div",attrs:[{name:"class",value:"controls__elements"}]});title.classList.add("video__title"),title.textContent=this.elem.title,controls.classList.add("controls"),rangeWrapper.appendChild(volume),audio.appendChild(mute),audio.appendChild(rangeWrapper),elements.appendChild(play),elements.appendChild(audio),elements.appendChild(time),elements.appendChild(fullscreen),controls.appendChild(progress),controls.appendChild(elements),wrapper.appendChild(title),wrapper.appendChild(this.elem),wrapper.appendChild(controls),wrapper.classList.add("video"),document.body.appendChild(wrapper),this.elem.addEventListener("loadedmetadata",function(){time.textContent=self.getHumanReadableTime()},!1),volume.addEventListener("change",function(){self.changeVolume(this.value)},!1),mute.addEventListener("click",function(){self.mute(volume),this.classList.toggle("controls__mute_on")},!1),play.addEventListener("click",function(){self.playPause(),this.classList.toggle("controls__play_paused")},!1),this.elem.addEventListener("ended",function(){play.classList.toggle("controls__play_paused")}),this.elem.addEventListener("timeupdate",function(){time.textContent=self.getHumanReadableTime(this.currentTime),self.updateProgressbar(progress)},!1),progress.addEventListener("click",function(e){var coords=Math.floor(100/this.offsetWidth*e.offsetX);self.goToPosition(coords),this.value=coords,self.elem.paused&&self.elem.play()},!1),fullscreen.addEventListener("click",function(){self.fullScreen()},!1)};for(var videos=document.querySelectorAll("video"),videosLen=videos.length,newArr=[],i=0;videosLen>i;i+=1)newArr.push(new Video(videos[i]))}();